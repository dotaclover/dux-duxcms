import{g as s,I as se,_ as ie,i as $,x,bb as Z,bc as He,p as $e,h as Ae,m as Fe,C as We,u as Ye,R as d,s as ee,bd as Ge,v as te,H as k,be as Ue,U as Xe,ao as qe,bf as Je,O as ue,j as l,a6 as Qe,aY as Ze,b1 as et,a7 as tt,bg as nt,bh as ne,M as rt}from"./modulepreload-polyfill-bcbe5797.js";function re(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),n.push.apply(n,e)}return n}function ae(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?re(Object(n),!0).forEach(function(e){ie(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var at={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M11 1h1A11 11 0 111 12v-1h2v1a9 9 0 109-9h-1V1z"}}]},de=s.forwardRef(function(t,r){return s.createElement(se,ae(ae({},t),{},{id:"load",ref:r,icon:at}))});de.displayName="LoadIcon";const ot=de;function oe(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),n.push.apply(n,e)}return n}function ce(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?oe(Object(n),!0).forEach(function(e){ie(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ct={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h14.41L22 7.59V22H2V2zm2 2v16h2v-6h12v6h2V8.41L15.59 4H13v4H6V4H4zm4 0v2h3V4H8zm8 16v-4H8v4h8z"}}]},me=s.forwardRef(function(t,r){return s.createElement(se,ce(ce({},t),{},{id:"save",ref:r,icon:ct}))});me.displayName="SaveIcon";const lt=me;/**
 * tdesign v1.3.0
 * (c) 2023 tdesign
 * @license MIT
 */var st={closeOnEscKeydown:void 0,closeOnOverlayClick:void 0,destroyOnClose:!1,closeBtn:!0,footer:!0,header:!0,mode:"overlay",placement:"right",preventScrollThrough:!0,showInAttachedElement:!1,showOverlay:!0,size:void 0,sizeDraggable:!1,visible:!1};/**
 * tdesign v1.3.0
 * (c) 2023 tdesign
 * @license MIT
 */var it=function(r,n){var e=s.useState(null),f=$(e,2),C=f[0],i=f[1],p=function(c){var u=c.x,O=c.y;n&&(r==="right"&&i("".concat(document.documentElement.clientWidth-u+8,"px")),r==="left"&&i("".concat(u+8,"px")),r==="top"&&i("".concat(O+8,"px")),r==="bottom"&&i("".concat(document.documentElement.clientHeight-O+8,"px")))},y=function o(){document.removeEventListener("mouseup",o,!0),document.removeEventListener("mousemove",p,!0)},h=s.useMemo(function(){var o,c=["right","left"].includes(r),u={left:"right",right:"left",top:"bottom",bottom:"top"};return o={zIndex:1,position:"absolute",background:"transparent"},x(o,u[r],0),x(o,"width",c?"16px":"100%"),x(o,"height",c?"100%":"16px"),x(o,"cursor",c?"col-resize":"row-resize"),o},[r]),m=function(){document.addEventListener("mouseup",y,!0),document.addEventListener("mousemove",p,!0)};return{dragSizeValue:C,enableDrag:m,draggableLineStyles:h}};/**
 * tdesign v1.3.0
 * (c) 2023 tdesign
 * @license MIT
 */var ut=1;function dt(t){var r=t.preventScrollThrough,n=t.mode,e=t.visible,f=t.showInAttachedElement,C=t.placement,i=t.sizeValue,p=s.useRef(null),y=s.useRef(null),h=s.useCallback(function(){clearTimeout(y.current),y.current=setTimeout(function(){var o,c;(o=p.current.parentNode)===null||o===void 0||(c=o.removeChild)===null||c===void 0||c.call(o,p.current)},150)},[]),m=s.useMemo(function(){return{top:"margin: ".concat(i," 0 0 0"),left:"margin: 0 0 0 ".concat(i),right:"margin: 0 0 0 -".concat(i),bottom:"margin: -".concat(i," 0 0 0")}[C]},[C,i]);Z(function(){if(!(typeof document>"u")){p.current||(p.current=document.createElement("style"));var o=document.documentElement.scrollHeight>document.documentElement.clientHeight,c=o?He():0;p.current.dataset.id="td_drawer_".concat(+new Date,"_").concat(ut+=1),p.current.innerHTML=`
      html body {
        overflow-y: hidden;
        transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
        `.concat(n==="push"?m:"width: calc(100% - ".concat(c,"px);"),`
      }
    `)}},[n,m]),Z(function(){typeof document>"u"||!r||f||(e?document.head.appendChild(p.current):h())},[r,e,f,h]),s.useEffect(function(){return h},[h])}/**
 * tdesign v1.3.0
 * (c) 2023 tdesign
 * @license MIT
 */function le(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),n.push.apply(n,e)}return n}function H(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?le(Object(n),!0).forEach(function(e){x(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var B={CLICK_OVERLAY:"overlay",CLICK_CLOSE_BTN:"close-btn",CLICK_CANCEL_BTN:"cancel",KEYDOWN_ESC:"esc"},fe=s.forwardRef(function(t,r){var n,e=$e(t,st),f=e.className,C=e.style,i=e.visible,p=e.attach,y=e.showOverlay,h=e.size,m=e.placement,o=e.onCancel,c=e.onConfirm,u=e.onClose,O=e.onCloseBtnClick,b=e.onOverlayClick,g=e.onEscKeydown,P=e.showInAttachedElement,D=e.closeOnOverlayClick,E=e.closeOnEscKeydown,w=e.children,I=e.header,j=e.body,R=e.footer,V=e.closeBtn,_=e.cancelBtn,S=e.confirmBtn,ve=e.zIndex,pe=e.destroyOnClose,A=e.sizeDraggable,ge=Ae("drawer"),F=$(ge,2),N=F[0],W=F[1],he=Fe({CloseIcon:We}),ye=he.CloseIcon,K=h??N.size,be=W(N.confirm),Ce=W(N.cancel),Oe=Ye(),xe=Oe.classPrefix,Y=s.useRef(),M=s.useRef(),G=s.useRef(),v="".concat(xe,"-drawer"),Ee=d.isValidElement(V)?V:d.createElement(ye,null),T=it(m,A),U=T.dragSizeValue,we=T.enableDrag,je=T.draggableLineStyles,_e=s.useState(i),X=$(_e,2),q=X[0],J=X[1],z=s.useMemo(function(){var a={small:"300px",medium:"500px",large:"760px"};return U||a[K]||K},[U,K]);dt(H(H({},e),{},{sizeValue:z})),s.useImperativeHandle(r,function(){return M.current}),s.useEffect(function(){var a,L;i&&((a=M.current)===null||a===void 0||(L=a.focus)===null||L===void 0||L.call(a))},[i]);function Se(a){b==null||b({e:a}),(D??N.closeOnOverlayClick)&&(u==null||u({e:a,trigger:B.CLICK_OVERLAY}))}function ke(a){O==null||O({e:a}),u==null||u({e:a,trigger:B.CLICK_CLOSE_BTN})}function De(a){a.key==="Escape"&&(g==null||g({e:a}),(E??N.closeOnEscKeydown)&&(u==null||u({e:a,trigger:B.KEYDOWN_ESC})))}function Ie(a){o==null||o({e:a}),u==null||u({e:a,trigger:B.CLICK_CANCEL_BTN})}function Ne(a){c==null||c({e:a})}var Le=s.useMemo(function(){return{transform:i&&q?"translateX(0)":void 0,width:["left","right"].includes(m)?z:"",height:["top","bottom"].includes(m)?z:""}},[i,m,z,q]);function Pe(){if(R!==!0)return R;var a=d.createElement(k,{theme:"default",onClick:Ie,className:"".concat(v,"__cancel")},_&&typeof _=="string"?_:Ce),L=d.createElement(k,{theme:"primary",onClick:Ne,className:"".concat(v,"__confirm")},S&&typeof S=="string"?S:be),Me=_&&d.isValidElement(_)?_:a,Q=S&&d.isValidElement(S)?S:L,Te={display:"flex",justifyContent:m==="right"?"flex-start":"flex-end"};return d.createElement("div",{style:Te},m==="right"&&Q,Me,m!=="right"&&Q)}var ze=y&&d.createElement(ee,{in:i,timeout:200,classNames:"".concat(v,"-fade"),nodeRef:Y},d.createElement("div",{ref:Y,className:"".concat(v,"__mask"),onClick:Se})),Be=V&&d.createElement("div",{onClick:ke,className:"".concat(v,"__close-btn")},Ee),Re=I&&d.createElement("div",{className:"".concat(v,"__header")},I),Ve=d.createElement("div",{className:"".concat(v,"__body")},j||w),Ke=R&&d.createElement("div",{className:"".concat(v,"__footer")},Pe());return d.createElement(ee,{in:i,nodeRef:G,unmountOnExit:pe,timeout:{appear:10,enter:10,exit:300},onEntered:function(){return J(!0)},onExited:function(){return J(!1)}},d.createElement(Ge,{attach:p,ref:G},d.createElement("div",{ref:M,className:te(v,f,"".concat(v,"--").concat(m),(n={},x(n,"".concat(v,"--open"),i),x(n,"".concat(v,"--attach"),P),x(n,"".concat(v,"--without-mask"),!y),n)),style:H({zIndex:ve},C),tabIndex:-1,onKeyDown:De},ze,d.createElement("div",{className:te("".concat(v,"__content-wrapper"),"".concat(v,"__content-wrapper--").concat(m)),style:Le},Be,Re,Ve,Ke,A&&d.createElement("div",{style:je,onMouseDown:we})))))});fe.displayName="Drawer";/**
 * tdesign v1.3.0
 * (c) 2023 tdesign
 * @license MIT
 */var mt=fe;const vt=({title:t,children:r,onSubmit:n,onResult:e,back:f,rest:C,headerRender:i,actionRender:p,settingRender:y,formProps:h,form:m,...o})=>{var I;const[c,u]=s.useState(),O=Ue(),b=Xe(),{resource:g}=qe(),{name:P}=Je(),[D,E]=s.useState(!1),[w]=ue.useForm(m);return l.jsx(Qe,{title:t,header:i,icon:(I=g==null?void 0:g.meta)==null?void 0:I.icon,actions:l.jsxs(l.Fragment,{children:[f&&l.jsx(k,{onClick:()=>{O()},variant:"outline",icon:l.jsx(Ze,{}),children:b("buttons.back")}),C&&l.jsx(k,{onClick:()=>{w.reset()},variant:"outline",icon:l.jsx(ot,{}),loading:!!(c!=null&&c.formLoading),children:b("buttons.rest")}),p,y&&l.jsx(k,{variant:"outline",theme:"primary",icon:l.jsx(et,{}),onClick:()=>E(!0),children:b("buttons.setting")}),l.jsx(k,{onClick:()=>{w.submit()},loading:!!(c!=null&&c.formLoading),icon:l.jsx(lt,{}),children:b("buttons.save")})]}),children:l.jsx(tt,{children:l.jsxs(nt,{form:w,onResult:j=>{e==null||e(j),u(j)},onSubmit:async j=>{await(n==null?void 0:n(j))},formProps:{labelAlign:"left",className:"divide-y divide-gray-2 dark:divide-gray-10 py-2",...h},...o,children:[r,l.jsx(ne.Render,{mark:[P,g==null?void 0:g.name,"form"]}),y&&l.jsxs(mt,{sizeDraggable:!0,size:"450px",confirmBtn:b("buttons.save"),onConfirm:()=>{E(!1),w.submit()},header:b("buttons.setting"),visible:D,onClose:()=>E(!1),children:[y,l.jsx(ne.Render,{mark:[P,g==null?void 0:g.name,"form","setting"]})]})]})})})},pt=({label:t,help:r,requiredMark:n,...e})=>l.jsxs("div",{className:"grid grid-cols-1 mb-4 gap-4 pt-4 md:grid-cols-5",children:[t&&l.jsxs("div",{className:"col-span-2 xl:col-span-1",children:[l.jsxs("div",{className:"relative",children:[n&&l.jsx("span",{className:"absolute text-error -left-3",children:"*"}),t]}),l.jsx("div",{className:"mt-1 text-sm text-placeholder",children:r})]}),l.jsx("div",{className:rt([t?"flex items-center col-span-3 xl:col-span-4":"col-span-5"]),children:l.jsx(ue.FormItem,{...e,className:"w-full"})})]});export{mt as D,vt as F,pt as a};
