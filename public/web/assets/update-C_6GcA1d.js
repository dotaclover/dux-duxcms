import{X as g,an as j,g as n,bw as h,bx as f,j as s,a4 as r,a6 as v,J as i,R as Y}from"./modulepreload-polyfill-DkiKXnSB.js";const M=({data:t})=>{const a=g(),d=j(),[u,l]=n.useState(!1),[o,p]=n.useState(""),{onClose:m}=h(),x=n.useCallback(()=>{l(!0),d.request("cloud/apps/update","post",{data:{name:t.name}}).then(e=>{var c;if(e.code!==200){f.error(e.message);return}p((c=e==null?void 0:e.data)==null?void 0:c.content)}).finally(()=>{l(!1)})},[]);return s.jsxs(s.Fragment,{children:[o?s.jsx("div",{className:"p-4",children:s.jsx("pre",{className:"overflow-auto rounded-lg p-4 bg-component",children:o})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"mb-2",children:a("cloud.apps.tips.update")}),s.jsxs("div",{className:"mb-2",children:["当前版本：",r(t.local_time*1e3).format("YYYY-MM-DD HH:mm:ss")]}),s.jsxs("div",{children:["最新版本：",s.jsx("span",{className:"text-error",children:r(t.time*1e3).format("YYYY-MM-DD HH:mm:ss")})]})]}),s.jsxs(v.Footer,{children:[s.jsx(i,{variant:"outline",onClick:m,children:a("cloud.apps.action.close")}),s.jsx(i,{onClick:()=>{x()},children:a("cloud.apps.action.update")})]})]}),s.jsx(Y,{loading:u,fullscreen:!0,preventScrollThrough:!0,text:a("cloud.apps.tips.loading")})]})};export{M as default};
