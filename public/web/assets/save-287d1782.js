import{bv as Pe,ay as re,g as m,q as Te,G as Ce,i as K,bw as Ee,bx as se,av as R,u as ze,x as p,v as F,R as S,y as A,by as Ke,j as u,bz as Re,bA as oe,P as N,Q as ue,Y as Fe,ab as Ie,J as He}from"./modulepreload-polyfill-d587593e.js";/**
 * tdesign v1.2.6
 * (c) 2023 tdesign
 * @license MIT
 */var Me=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,h;function ce(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;h||(h=document.createElement("textarea"),document.body.appendChild(h));var s=Pe(e),i=s.paddingSize,l=s.borderSize,v=s.boxSizing,a=s.sizingStyle;h.setAttribute("style","".concat(a,";").concat(Me)),h.value=e.value||e.placeholder||"";var d=h.scrollHeight,y={},j=v==="border-box",I=v==="content-box";j?d+=l:I&&(d-=i),h.value="";var T=h.scrollHeight-i;(r=h)===null||r===void 0||(r=r.parentNode)===null||r===void 0||r.removeChild(h),h=null;var C=function(f){var b=T*f;return j&&(b=b+i+l),b};if(!re(n)){var P=C(n);d=Math.max(P,d),y.minHeight="".concat(P,"px")}return re(t)||(d=Math.min(C(t),d)),y.height="".concat(d,"px"),y}/**
 * tdesign v1.2.6
 * (c) 2023 tdesign
 * @license MIT
 */var Le={allowInputOverMax:!1,autofocus:!1,autosize:!1,placeholder:void 0,readonly:!1};/**
 * tdesign v1.2.6
 * (c) 2023 tdesign
 * @license MIT
 */var De=["disabled","maxlength","maxcharacter","className","readonly","autofocus","style","onKeydown","onKeypress","onKeyup","autosize","status","tips","allowInputOverMax"];function ie(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,t)}return n}function $(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ie(Object(n),!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var U=m.forwardRef(function(e,r){var n,t,s=e.disabled,i=e.maxlength,l=e.maxcharacter,v=e.className,a=e.readonly,d=e.autofocus,y=e.style,j=e.onKeydown,I=j===void 0?A:j,T=e.onKeypress,C=T===void 0?A:T,P=e.onKeyup,B=P===void 0?A:P,f=e.autosize,b=e.status,V=e.tips,w=e.allowInputOverMax,q=Te(e,De),le=Ce(e,"value",e.onChange),Y=K(le,2),Z=Y[0],O=Z===void 0?"":Z,me=Y[1],de=m.useState(!1),k=K(de,2),fe=k[0],G=k[1],xe=m.useState(!1),J=K(xe,2),ve=J[0],he=J[1],ge=m.useState({}),Q=K(ge,2),pe=Q[0],H=Q[1],E=m.useRef(!1),W=typeof l<"u",_=m.useRef(),X=m.useRef(),M=m.useMemo(function(){return Ee(O)},[O]),L=m.useMemo(function(){var o=se(String(O),w?1/0:l);return R(o)==="object"?o.length:o},[O,w,l]),be=ze(),x=be.classPrefix,ye=Object.keys(q).filter(function(o){return!/^on[A-Z]/.test(o)}),je=ye.reduce(function(o,c){return Object.assign(o,p({},c,e[c]))},{}),_e=Object.keys(q).filter(function(o){return/^on[A-Z]/.test(o)}),we=_e.reduce(function(o,c){return Object.assign(o,p({},c,function(g){s||(c==="onFocus"&&G(!0),c==="onBlur"&&G(!1),e[c](g.currentTarget.value,{e:g}))})),o},{}),Oe=F("".concat(x,"-textarea__inner"),v,(n={},p(n,"".concat(x,"-is-").concat(b),b),p(n,"".concat(x,"-is-disabled"),s),p(n,"".concat(x,"-is-focused"),fe),p(n,"".concat(x,"-resize-none"),R(f)==="object"),n)),z=m.useCallback(function(){f===!0?H(ce(_.current)):R(f)==="object"&&H(ce(_.current,f==null?void 0:f.minRows,f==null?void 0:f.maxRows))},[f]);m.useEffect(function(){z()},[_==null?void 0:_.current]);function ee(o){var c=o.target,g=c.value;if(!w&&!E.current&&(g=Ke(g,i),l&&l>=0)){var ne=se(g,l);g=R(ne)==="object"&&ne.characters}me(g,{e:o})}function Se(){E.current=!0}function Ne(o){E.current&&(E.current=!1,ee(o))}var te=function(c,g){return S.createElement("span",{className:"".concat(x,"-textarea__limit")},ve&&w?S.createElement("span",{className:"".concat(x,"-textarea__tips--warning")}," ",c):"".concat(c),"/".concat(g))};m.useEffect(function(){f===!1&&H({height:"auto",minHeight:"auto"})},[z,f]),m.useEffect(function(){z()},[z,O]),m.useEffect(function(){w&&he(!!(i&&M>i)||!!(l&&L>l))},[w,L,M,l,i]),m.useImperativeHandle(r,function(){return{currentElement:X.current,textareaElement:_.current}});var D=V&&S.createElement("div",{className:F("".concat(x,"-textarea__tips"),(t={},p(t,"".concat(x,"-textarea__tips--normal"),!b),p(t,"".concat(x,"-textarea__tips--").concat(b),b),t))},V),ae=W&&te(L,l)||!W&&i&&te(M,i);return S.createElement("div",{style:y,ref:X,className:F("".concat(x,"-textarea"),v)},S.createElement("textarea",$($($({},je),we),{},{value:O,style:pe,className:Oe,readOnly:a,autoFocus:d,disabled:s,onChange:ee,onKeyDown:function(c){return I(c.currentTarget.value,{e:c})},onKeyPress:function(c){return C(c.currentTarget.value,{e:c})},onKeyUp:function(c){return B(c.currentTarget.value,{e:c})},onCompositionStart:Se,onCompositionEnd:Ne,ref:_})),D||ae?S.createElement("div",{className:F("".concat(x,"-textarea__info_wrapper"),p({},"".concat(x,"-textarea__info_wrapper_align"),!D))},D,ae):null)});U.displayName="Textarea";U.defaultProps=Le;/**
 * tdesign v1.2.6
 * (c) 2023 tdesign
 * @license MIT
 */var Ae=U;const Be=e=>{const[r,n]=m.useState({});return u.jsx(Re,{id:e==null?void 0:e.id,handleData:t=>{var s,i;n((i=(s=t==null?void 0:t.result)==null?void 0:s.queryResult)==null?void 0:i.data)},padding:!1,children:u.jsx(oe,{placement:"top",size:"medium",defaultValue:0,children:Object.entries((r==null?void 0:r.meta)||{}).filter(([t])=>t!="theme").map(([t,s],i)=>{const l=Object.entries((s==null?void 0:s.fields)||{});return u.jsx(oe.TabPanel,{value:i,label:s==null?void 0:s.name,destroyOnHide:!1,children:u.jsx("div",{className:"p-5",children:l.map(([v,a],d)=>{if((a==null?void 0:a.type)=="textarea")return u.jsx(N.FormItem,{name:[t,v],label:a==null?void 0:a.label,children:u.jsx(Ae,{})},d);if((a==null?void 0:a.type)=="text")return u.jsx(N.FormItem,{name:[t,v],label:a==null?void 0:a.label,children:u.jsx(ue,{})},d);if((a==null?void 0:a.type)=="list")return u.jsx($e,{name:[t,v],items:a==null?void 0:a.fields},d)})})},i)})})})},$e=({name:e,items:r})=>{const n=Fe();return u.jsx(N.FormList,{name:e,children:(t,{add:s,remove:i})=>u.jsxs(u.Fragment,{children:[t.map(({key:l,name:v,...a})=>u.jsxs("div",{className:"flex gap-4",children:[Object.entries(r||{}).map(([d,y],j)=>m.createElement(N.FormItem,{...a,key:j,name:[v,d],label:y,className:"w-0 flex-1"},u.jsx(ue,{className:"w-full"}))),u.jsx(N.FormItem,{label:" ",className:"flex-none",children:u.jsx(Ie,{size:"20px",name:"delete",style:{cursor:"pointer"},onClick:()=>i(v)})})]},l)),u.jsx(N.FormItem,{children:u.jsx(He,{theme:"default",variant:"dashed",onClick:()=>s({}),children:n("cms.theme.addField")})})]})})};export{Be as default};
