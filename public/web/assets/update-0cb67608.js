import{U as g,ap as j,g as l,bH as h,bI as f,j as s,W as r,Y,H as i,Q as v}from"./modulepreload-polyfill-bcbe5797.js";const M=({data:t})=>{const a=g(),d=j(),[u,n]=l.useState(!1),[o,p]=l.useState(""),{onClose:m}=h(),x=l.useCallback(()=>{n(!0),d.request("cloud/apps/update","post",{data:{name:t.name}}).then(e=>{var c;if(e.code!==200){f.error(e.message);return}p((c=e==null?void 0:e.data)==null?void 0:c.content)}).finally(()=>{n(!1)})},[]);return s.jsxs(s.Fragment,{children:[o?s.jsx("div",{className:"p-4",children:s.jsx("pre",{className:"overflow-auto rounded-lg p-4 bg-component",children:o})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"mb-2",children:a("cloud.apps.tips.update")}),s.jsxs("div",{className:"mb-2",children:["当前版本：",r(t.local_time*1e3).format("YYYY-MM-DD HH:mm:ss")]}),s.jsxs("div",{children:["最新版本：",s.jsx("span",{className:"text-error",children:r(t.time*1e3).format("YYYY-MM-DD HH:mm:ss")})]})]}),s.jsxs(Y.Footer,{children:[s.jsx(i,{variant:"outline",onClick:m,children:a("cloud.apps.action.close")}),s.jsx(i,{onClick:()=>{x()},children:a("cloud.apps.action.update")})]})]}),s.jsx(v,{loading:u,fullscreen:!0,preventScrollThrough:!0,text:a("cloud.apps.tips.loading")})]})};export{M as default};
