import{_ as f}from"./index-1cc319e3.js";import{U as N,ae as O,ag as C,g as u,at as E,R as P,j as e,a0 as I,X as o,Z as h,$ as K,H as d,Y as x,O as L,S as k}from"./modulepreload-polyfill-ac2ad948.js";import{P as j}from"./index-952c5e1d.js";const D=()=>{const t=N(),{mutate:m}=O(),{create:v,edit:y}=C(),a=u.useRef(null),[p,g]=u.useState(!1),{options:r,onSearch:_,queryResult:b}=E({resource:"tools.magicGroup",optionLabel:"label",optionValue:"id"});u.useEffect(()=>{var s,i,l;!r.length&&!p||(g(()=>!0),(l=(s=a.current)==null?void 0:s.form)==null||l.setFieldsValue({menu_id:(i=r[0])==null?void 0:i.value}))},[p,r]);const R=P.useMemo(()=>[{colKey:"id",sorter:!0,sortType:"all",title:"ID",width:100},{colKey:"group_label",title:t("tools.magic.fields.group"),ellipsis:!0,cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{name:s.group_icon})," ",s.group_label||t("tools.magic.fields.unknown")]})},{colKey:"label",title:t("tools.magic.fields.label"),ellipsis:!0},{colKey:"type",title:t("tools.magic.fields.type"),ellipsis:!0,cell:({row:s})=>e.jsxs(e.Fragment,{children:[s.type==="common"&&e.jsx(o,{variant:"outline",theme:"primary",children:t("tools.magic.fields.list")}),s.type==="pages"&&e.jsx(o,{variant:"outline",theme:"warning",children:t("tools.magic.fields.pages")}),s.type==="tree"&&e.jsx(o,{variant:"outline",theme:"success",children:t("tools.magic.fields.tree")}),s.type==="page"&&e.jsx(o,{variant:"outline",theme:"success",children:t("tools.magic.fields.page")})]})},{colKey:"external",title:t("tools.magic.fields.external"),ellipsis:!0,cell:({row:s})=>{var l,n,c;const i=s.external;return e.jsxs("div",{className:"flex gap-2",children:[i?"":"-",(l=i==null?void 0:i.indexOf)!=null&&l.call(i,"read")?e.jsx(o,{variant:"outline",theme:"primary",children:t("tools.magic.external.read")}):"",(n=i==null?void 0:i.indexOf)!=null&&n.call(i,"create")?e.jsx(o,{variant:"outline",theme:"primary",children:t("tools.magic.external.create")}):"",(c=i==null?void 0:i.indexOf)!=null&&c.call(i,"edit")?e.jsx(o,{variant:"outline",theme:"primary",children:t("tools.magic.external.edit")}):""]})}},{colKey:"link",title:t("table.actions"),fixed:"right",align:"center",width:120,cell:({row:s})=>e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(h,{theme:"primary",onClick:()=>y("tools.magic",s.id),children:t("buttons.edit")}),e.jsx(j,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{m({resource:"tools.magic",id:s.id})},children:e.jsx(h,{theme:"danger",children:t("buttons.delete")})})]})}],[t]);return e.jsx(K,{ref:a,columns:R,actionRender:()=>e.jsx(d,{icon:e.jsx("div",{className:"i-tabler:plus t-icon"}),onClick:()=>{v("tools.magic")},children:t("buttons.create")}),filterRender:()=>{var s,i,l,n;return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(x,{title:t("tools.magic.fields.addGroup"),trigger:e.jsx(d,{icon:e.jsx("div",{className:"i-tabler:plus"}),variant:"outline"}),component:()=>f(()=>import("./group-78e8080c.js"),["assets/group-78e8080c.js","assets/modulepreload-polyfill-ac2ad948.js"])})}),e.jsx(L.FormItem,{name:"group_id",initialData:(s=r==null?void 0:r[0])==null?void 0:s.value,children:e.jsx(k,{filterable:!0,clearable:!0,onSearch:_,options:r,placeholder:t("tools.magic.placeholder.group"),loading:b.isLoading})}),((l=(i=a.current)==null?void 0:i.filters)==null?void 0:l.group_id)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{title:t("tools.magic.fields.editGroup"),trigger:e.jsx(d,{icon:e.jsx("div",{className:"i-tabler:edit"}),variant:"outline"}),component:()=>f(()=>import("./group-78e8080c.js"),["assets/group-78e8080c.js","assets/modulepreload-polyfill-ac2ad948.js"]),componentProps:{id:(n=a.current)==null?void 0:n.filters.group_id}}),e.jsx(j,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{var c;m({resource:"tools.magicGroup",id:(c=a.current)==null?void 0:c.filters.group_id}),g(!1)},children:e.jsx(d,{icon:e.jsx("div",{className:"i-tabler:trash"}),variant:"outline"})})]})]})}})};export{D as default};
