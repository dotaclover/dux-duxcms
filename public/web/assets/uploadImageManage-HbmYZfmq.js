import{j as e}from"./vendor-map-DjDVTs0N.js";import{y as h,m as v}from"./modulepreload-polyfill-D6ThnDFs.js";import{r as N}from"./vendor-react-BlTfyhut.js";import{G as C}from"./vendor-refine-BK41FXO6.js";import{F as b}from"./manage-bOx1Sh-_.js";import{m as p,J as k,K as I,N as w}from"./vendor-tdesign-BxQoi5Mo.js";const S=({className:l,value:o,defaultValue:n,onChange:f,multiple:t,accept:_})=>{var x;const[i,c]=h({value:o,defaultValue:n,onChange:f}),u=C(),[g,d]=N.useState(!1),s=i?Array.isArray(i)?i:[i]:void 0;return e.jsxs("div",{className:v(["flex flex-col gap-2 w-full t-upload",l]),children:[e.jsxs("div",{className:"t-upload__card clearfix ",children:[s&&(s==null?void 0:s.length)>0&&((x=s.map)==null?void 0:x.call(s,(m,r)=>e.jsx(y,{url:m,onRemove:()=>{c(a=>{if(t)return a==null?void 0:a.filter((z,j)=>j!=r)})}},r))),(t||!s||(s==null?void 0:s.length)<=0)&&e.jsx("div",{className:"t-upload__card-item t-is-background",children:e.jsxs("div",{className:"t-upload__image-add t-upload__card-container t-upload__card-box",onClick:()=>d(!0),children:[e.jsx(p,{name:"add"}),e.jsx("p",{className:"t-size-s",children:u("placeholder.image",{ns:"file"})})]})})]}),e.jsx(k,{className:"app-modal",width:"800px",header:u("fields.manage",{ns:"file"}),visible:g,destroyOnClose:!0,footer:!1,onClose:()=>d(!1),children:e.jsx(b,{accept:_,mode:t?"multi":"single",onClose:()=>d(!1),onChange:m=>{const r=m.map(a=>a.url);c(t?a=>[...a,...r]:r[0])}})})]})},y=({url:l,onRemove:o})=>e.jsx("div",{className:"t-upload__card-item",children:e.jsx("div",{className:"t-upload__card-content t-is-bordered",children:e.jsx(I,{trigger:({open:n})=>e.jsx(w,{src:l,className:"t-upload__card-image w-full h-full",overlayContent:e.jsxs("div",{className:"t-upload__card-mask",children:[e.jsx("span",{className:"t-upload__card-mask-item",children:e.jsx(p,{size:"16px",name:"browse",onClick:()=>n()})}),e.jsx("span",{className:"t-upload__card-mask-item-divider"}),e.jsx("span",{className:"t-upload__card-mask-item t-upload__delete",onClick:o,children:e.jsx(p,{size:"16px",name:"delete"})})]}),overlayTrigger:"hover",fit:"contain"}),images:[l]})})});export{S as U};
