import{U as h,g as v,j as e,M as N,a0 as p,bf as b,bb as C,ac as k}from"./modulepreload-polyfill-ac2ad948.js";import{u as I}from"./index-b453100f.js";import{F as w}from"./manage-1e10d394.js";const A=({className:r,value:n,defaultValue:o,onChange:_,multiple:t,accept:f})=>{var x;const[i,c]=I({value:n,defaultValue:o,onChange:_}),u=h(),[g,d]=v.useState(!1),s=i?Array.isArray(i)?i:[i]:void 0;return e.jsxs("div",{className:N(["flex flex-col gap-2 w-full t-upload",r]),children:[e.jsxs("div",{className:"t-upload__card clearfix ",children:[s&&(s==null?void 0:s.length)>0&&((x=s.map)==null?void 0:x.call(s,(m,l)=>e.jsx(y,{url:m,onRemove:()=>{c(a=>{if(t)return a==null?void 0:a.filter((z,j)=>j!=l)})}},l))),(t||!s||(s==null?void 0:s.length)<=0)&&e.jsx("div",{className:"t-upload__card-item t-is-background",children:e.jsxs("div",{className:"t-upload__image-add t-upload__card-container t-upload__card-box",onClick:()=>d(!0),children:[e.jsx(p,{name:"add"}),e.jsx("p",{className:"t-size-s",children:u("placeholder.image",{ns:"file"})})]})})]}),e.jsx(b,{className:"app-modal",width:"800px",header:u("fields.manage",{ns:"file"}),visible:g,destroyOnClose:!0,footer:!1,onClose:()=>d(!1),children:e.jsx(w,{accept:f,mode:t?"multi":"single",onClose:()=>d(!1),onChange:m=>{const l=m.map(a=>a.url);c(t?a=>[...a,...l]:l[0])}})})]})},y=({url:r,onRemove:n})=>e.jsx("div",{className:"t-upload__card-item",children:e.jsx("div",{className:"t-upload__card-content t-is-bordered",children:e.jsx(C,{trigger:({open:o})=>e.jsx(k,{src:r,className:"t-upload__card-image w-full h-full",overlayContent:e.jsxs("div",{className:"t-upload__card-mask",children:[e.jsx("span",{className:"t-upload__card-mask-item",children:e.jsx(p,{size:"16px",name:"browse",onClick:()=>o()})}),e.jsx("span",{className:"t-upload__card-mask-item-divider"}),e.jsx("span",{className:"t-upload__card-mask-item t-upload__delete",onClick:n,children:e.jsx(p,{size:"16px",name:"delete"})})]}),overlayTrigger:"hover",fit:"contain"}),images:[r]})})});export{A as U};
