import{_ as a}from"./index-27888db1.js";import{Y as v,ac as y,g as d,R as E,j as e,a9 as u,a3 as x,af as P,J as c,P as R,S as I}from"./modulepreload-polyfill-1cc1042d.js";import{u as L}from"./useSelect-be856e0f.js";import{P as h}from"./index-f6a17ec9.js";const F=()=>{const t=v(),{mutate:m}=y(),i=d.useRef(null),[p,f]=d.useState(!1),{options:o,onSearch:j,queryResult:g}=L({resource:"content.menu",optionLabel:"title",optionValue:"id"});d.useEffect(()=>{var n,r,s;!o.length&&!p||(f(()=>!0),(s=(n=i.current)==null?void 0:n.form)==null||s.setFieldsValue({menu_id:(r=o[0])==null?void 0:r.value}))},[p,o]);const b=E.useMemo(()=>[{colKey:"id",sorter:!0,sortType:"all",title:"ID",width:150},{colKey:"title",title:t("content.menu.fields.title"),ellipsis:!0},{colKey:"url",title:t("content.menu.fields.url"),ellipsis:!0},{colKey:"link",title:t("table.actions"),fixed:"right",align:"center",width:160,cell:({row:n})=>e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(u,{title:t("buttons.edit"),trigger:e.jsx(x,{theme:"primary",children:t("buttons.edit")}),component:()=>a(()=>import("./save-e108db78.js"),["assets/save-e108db78.js","assets/modulepreload-polyfill-1cc1042d.js","assets/uploadImage-82d541ff.js","assets/index-ae91c890.js"]),componentProps:{id:n.id,menu_id:n.menu_id}}),e.jsx(h,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{var r;m({resource:"content.menuData",id:n.id,meta:{params:{menu_id:(r=i.current)==null?void 0:r.filters.menu_id}}})},children:e.jsx(x,{theme:"danger",children:t("buttons.delete")})})]})}],[t]);return e.jsx(e.Fragment,{children:e.jsx(P,{ref:i,columns:b,table:{rowKey:"id",tree:{childrenKey:"children",treeNodeColumnIndex:1,defaultExpandAll:!0},pagination:void 0},actionRender:()=>{var n,r,s,l;return e.jsx(e.Fragment,{children:((r=(n=i.current)==null?void 0:n.filters)==null?void 0:r.menu_id)&&e.jsx(u,{title:t("buttons.create"),trigger:e.jsx(c,{icon:e.jsx("div",{className:"i-tabler:plus mr-2"}),children:t("buttons.create")}),component:()=>a(()=>import("./save-e108db78.js"),["assets/save-e108db78.js","assets/modulepreload-polyfill-1cc1042d.js","assets/uploadImage-82d541ff.js","assets/index-ae91c890.js"]),componentProps:{menu_id:(l=(s=i.current)==null?void 0:s.filters)==null?void 0:l.menu_id}})})},filterRender:()=>{var n,r,s,l;return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(u,{title:t("content.menu.fields.addGroup"),trigger:e.jsx(c,{icon:e.jsx("div",{className:"i-tabler:plus"}),variant:"outline"}),component:()=>a(()=>import("./group-aeb002e4.js"),["assets/group-aeb002e4.js","assets/modulepreload-polyfill-1cc1042d.js"])})}),e.jsx(R.FormItem,{name:"menu_id",initialData:(n=o==null?void 0:o[0])==null?void 0:n.value,children:e.jsx(I,{filterable:!0,clearable:!0,onSearch:j,options:o,placeholder:t("content.menu.placeholder.group"),loading:g.isLoading})}),((s=(r=i.current)==null?void 0:r.filters)==null?void 0:s.menu_id)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{title:t("content.menu.fields.editGroup"),trigger:e.jsx(c,{icon:e.jsx("div",{className:"i-tabler:edit"}),variant:"outline"}),component:()=>a(()=>import("./group-aeb002e4.js"),["assets/group-aeb002e4.js","assets/modulepreload-polyfill-1cc1042d.js"]),componentProps:{id:(l=i.current)==null?void 0:l.filters.menu_id}}),e.jsx(h,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{var _;m({resource:"content.menu",id:(_=i.current)==null?void 0:_.filters.menu_id}),f(!1)},children:e.jsx(c,{icon:e.jsx("div",{className:"i-tabler:trash"}),variant:"outline"})})]})]})}})})};export{F as default};
