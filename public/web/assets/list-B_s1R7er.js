const __vite__fileDeps=["assets/import-_U0v6FNI.js","assets/vendor-map-DjDVTs0N.js","assets/vendor-react-BlTfyhut.js","assets/vendor-tdesign-BxQoi5Mo.js","assets/modulepreload-polyfill-D6ThnDFs.js","assets/vendor-echarts-JHGMnnew.js","assets/vendor-refine-BK41FXO6.js","assets/vendor-tinymce-lUkVC9Da.js","assets/vendor-markdown-CL7ixDl-.js","assets/vendor-lib-CKVa3D7Q.js","assets/useUpload-BsrPC7ib.js","assets/export-C_hm8dOW.js","assets/useSelect-BorzI4ID.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as u}from"./vendor-markdown-CL7ixDl-.js";import{j as e}from"./vendor-map-DjDVTs0N.js";import{r as x,R as f}from"./vendor-react-BlTfyhut.js";import{G as y}from"./vendor-refine-BK41FXO6.js";import{u as h,$ as j,T as _}from"./modulepreload-polyfill-D6ThnDFs.js";import"./vendor-echarts-JHGMnnew.js";import{d as R,M as L,w as g}from"./vendor-tdesign-BxQoi5Mo.js";import{B as b}from"./button-VrESTZal.js";import{D as k}from"./link-NY0bYu7g.js";import"./vendor-tinymce-lUkVC9Da.js";import"./vendor-lib-CKVa3D7Q.js";import"./action-CcBf9P9h.js";const v=()=>{const{request:t,isLoading:s}=h();return{download:x.useCallback((a,o,c,l)=>{t(a,"post",{responseType:"blob",...c},!0).then(({response:w,...i})=>{if(i!=null&&i.data){const r=l||i.headers["content-type"],d=o||R().format("YYYYMMDD_HHmmss")+"."+j.getExtension(r);D(i.data,r,d)}else{const r=new FileReader;r.onload=function(){var m,p;const d=(p=(m=JSON.parse(r.result))==null?void 0:m.data[0])==null?void 0:p.message;L.error(d||"download error")},r.readAsText(w.data)}})},[t]),isLoading:s}},D=(t,s,n)=>{const a=new Blob([t],{type:s}),o=document.createElement("a"),l=(window.URL||window.webkitURL).createObjectURL(a);o.href=l,o.download=n,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l)},B=()=>{const t=y(),{download:s}=v(),n=f.useMemo(()=>[{colKey:"id",sorter:!0,sortType:"all",title:"ID",width:150},{colKey:"name",title:t("tools.backup.fields.name"),ellipsis:!0},{colKey:"created_at",title:t("tools.backup.fields.createdAt"),sorter:!0,sortType:"all",width:200},{colKey:"link",title:t("table.actions"),fixed:"right",align:"center",width:150,cell:({row:a})=>e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(g,{theme:"primary",onClick:()=>{s(`tools/backup/download/${a.id}`)},children:"下载"}),e.jsx(k,{rowId:a.id})]})}],[t]);return e.jsx(_,{columns:n,table:{rowKey:"id"},title:t("tools.area.name"),actionRender:()=>e.jsxs(e.Fragment,{children:[e.jsx(b,{title:t("buttons.import"),component:()=>u(()=>import("./import-_U0v6FNI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),action:"import",icon:e.jsx("div",{className:"t-icon i-tabler:database-import"})}),e.jsx(b,{title:t("buttons.export"),component:()=>u(()=>import("./export-C_hm8dOW.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,12])),action:"export",theme:"primary",variant:"outline",icon:e.jsx("div",{className:"t-icon i-tabler:database-export"})})]})})};export{B as default};
