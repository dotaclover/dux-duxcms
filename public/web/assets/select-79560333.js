import{g as a,ap as H,ba as A,j as p,S as K,bb as N}from"./modulepreload-polyfill-ac150c65.js";const G=({url:c,query:i,value:s,defaultValue:x,pagination:g,optionValue:u,optionLabel:d,optionRender:o,format:n,...E})=>{const[m,w]=a.useState(!1),[h,C]=a.useState(),[j,P]=a.useState([]),[f,M]=a.useState([]),[l,S]=a.useState(1),[O,k]=a.useState(1),{request:b,isLoading:z}=H();A(()=>{!m&&s&&(w(!0),b(c,"get",{params:{...i,ids:Array.isArray(s)?s.join(","):s}}).then(t=>{M((t==null?void 0:t.data)||[])}))},[c,i,s]),A(()=>{b(c,"get",{params:{...i,keyword:h,limit:20,page:l}}).then(t=>{var e,y;if(P((t==null?void 0:t.data)||[]),g){S(((e=t==null?void 0:t.meta)==null?void 0:e.page)||1);const D=Math.ceil(((y=t==null?void 0:t.meta)==null?void 0:y.total)/20);k(D)}})},[i,c,h,l]);const B=a.useMemo(()=>{const t=[...j,...f];return Array.from(new Set(t)).map(e=>({content:o==null?void 0:o(e),label:e[d||"label"],value:e[u||"value"],row:e}))},[d,o,u,j,f]);return p.jsx(K,{options:B,onSearch:t=>C(t),defaultValue:(n==null?void 0:n(x))||x,value:(n==null?void 0:n(s))||s,loading:z,panelBottomContent:g?p.jsx("div",{className:"flex justify-center pb-2",children:p.jsx(N,{size:"small",onChange:({trigger:t})=>{t=="next"&&l<O&&S(e=>e+1),t=="prev"&&l>1&&S(e=>e-1),t=="current"&&S(e=>e)}})}):void 0,...E})};export{G as S};
