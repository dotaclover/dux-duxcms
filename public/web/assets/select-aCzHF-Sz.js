import{j as x}from"./vendor-map-DjDVTs0N.js";import{r as S}from"./vendor-react-BlTfyhut.js";import{u as P}from"./useSelect-BorzI4ID.js";import{S as V,ad as b}from"./vendor-tdesign-BxQoi5Mo.js";const N=({url:r,query:M,pagination:v,optionValue:i="id",optionLabel:u="title",optionRender:l,format:c,...n})=>{var g,m;const[o,f]=S.useState(1),{queryResult:a,onSearch:z,defaultValueQueryResult:s}=P({resource:r,optionLabel:u,optionValue:i,defaultValue:n.value||n.defaultValue,meta:{params:M},pagination:{mode:v?"server":"off",current:o,pageSize:20}}),C=S.useMemo(()=>{var t,e;return Math.ceil(((e=(t=a==null?void 0:a.data)==null?void 0:t.meta)==null?void 0:e.total)/20)},[a]),E=S.useMemo(()=>{var h,j;let t=((h=a==null?void 0:a.data)==null?void 0:h.data)||[];console.log("defaultValueQueryResult",s);const e=((j=s==null?void 0:s.data)==null?void 0:j.data)||[];return e.length>0&&(t=[...e,...t]),t.map(d=>({content:l==null?void 0:l(d),label:d[u],value:d[i],row:d}))},[u,l,i,(g=a==null?void 0:a.data)==null?void 0:g.data,(m=s==null?void 0:s.data)==null?void 0:m.data]);return x.jsx(V,{options:E,onSearch:z,loading:a.isLoading,defaultValue:(c==null?void 0:c(n.defaultValue))||n.defaultValue,value:(c==null?void 0:c(n.value))||n.value,panelBottomContent:v?x.jsx("div",{className:"flex justify-center pb-2",children:x.jsx(b,{size:"small",onChange:({trigger:t})=>{t=="next"&&o<C&&f(e=>e+1),t=="prev"&&o>1&&f(e=>e-1),t=="current"&&f(e=>e)}})}):void 0,...n})};export{N as S};
