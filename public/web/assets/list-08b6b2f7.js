import{_ as a}from"./index-1cc319e3.js";import{U as g,ae as _,g as N,R as y,j as e,Z as h,$ as R,Y as n,H as l,O as P,S as $}from"./modulepreload-polyfill-ac2ad948.js";import{u as E}from"./useSelect-2ba2289c.js";import{P as p}from"./index-952c5e1d.js";const D=({mime:t})=>{switch(!0){case/^image\//.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-brand",children:e.jsx("div",{className:"i-tabler:photo h-6 w-6"})});case/^video\//.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-success",children:e.jsx("div",{className:"i-tabler:video h-6 w-6"})});case/^audio\//.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-warning",children:e.jsx("div",{className:"i-tabler:audio h-6 w-6"})});case/^application\/pdf$/.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-error",children:e.jsx("div",{className:"i-tabler:file-pdf h-6 w-6"})});case/^application\/vnd\.openxmlformats-officedocument\.wordprocessingml\.document$/.test(t):case/^application\/msword$/.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-brand",children:e.jsx("div",{className:"i-tabler:file-word h-6 w-6"})});case/^application\/vnd\.openxmlformats-officedocument\.spreadsheetml\.sheet$/.test(t):case/^application\/vnd\.ms-excel$/.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-brand",children:e.jsx("div",{className:"i-tabler:file-excel h-6 w-6"})});case/^application\/zip$/.test(t):case/^application\/x-rar-compressed$/.test(t):case/^application\/x-7z-compressed$/.test(t):return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-brand",children:e.jsx("div",{className:"i-tabler:file-zip h-6 w-6"})});default:return e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded p-2 text-white bg-brand",children:e.jsx("div",{className:"i-tabler:file-unknown h-6 w-6"})})}},O=()=>{var d,c;const t=g(),{mutate:o}=_(),s=N.useRef(null),{options:r,onSearch:j,queryResult:v}=E({resource:"tools.fileDir",optionLabel:"name",optionValue:"id"}),w=y.useMemo(()=>[{colKey:"name",title:t("tools.file.fields.name"),minWidth:300,cell:({row:i})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{children:e.jsx(D,{mime:i.mime})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:i.name}),e.jsx("div",{className:"text-sm text-gray",children:i.mime})]})]})},{colKey:"dir_name",title:t("tools.file.fields.dir"),width:150},{colKey:"size",title:t("tools.file.fields.size"),width:150},{colKey:"driver",title:t("tools.file.fields.driver"),width:150},{colKey:"time",title:t("tools.file.fields.time"),width:200},{colKey:"link",title:t("table.actions"),fixed:"right",align:"center",width:160,cell:({row:i})=>e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(h,{theme:"primary",href:i.url,target:"_block",children:t("buttons.show")}),e.jsx(p,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{o({resource:"tools.file",id:i.id})},children:e.jsx(h,{theme:"danger",children:t("buttons.delete")})})]})}],[t]),b=(c=(d=s.current)==null?void 0:d.filters)==null?void 0:c.dir_id;return e.jsx(e.Fragment,{children:e.jsx(R,{ref:s,columns:w,table:{rowKey:"id"},filterRender:()=>{var i,m,u,f;return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(n,{title:t("tools.file.fields.addDir"),trigger:e.jsx(l,{icon:e.jsx("div",{className:"i-tabler:plus"}),variant:"outline"}),component:()=>a(()=>import("./group-570fe54a.js"),["assets/group-570fe54a.js","assets/modulepreload-polyfill-ac2ad948.js"])})}),e.jsx(P.FormItem,{name:"dir_id",initialData:(i=r==null?void 0:r[0])==null?void 0:i.value,children:e.jsx($,{filterable:!0,clearable:!0,onSearch:j,options:r,placeholder:t("tools.file.placeholder.dir"),loading:v.isLoading})}),((u=(m=s.current)==null?void 0:m.filters)==null?void 0:u.dir_id)&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{title:t("tools.file.fields.editDir"),trigger:e.jsx(l,{icon:e.jsx("div",{className:"i-tabler:edit"}),variant:"outline"}),component:()=>a(()=>import("./group-570fe54a.js"),["assets/group-570fe54a.js","assets/modulepreload-polyfill-ac2ad948.js"]),componentProps:{id:(f=s.current)==null?void 0:f.filters.dir_id}}),e.jsx(p,{content:t("buttons.confirm"),destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default",onConfirm:()=>{var x;o({resource:"tools.file",id:(x=s.current)==null?void 0:x.filters.dir_id})},children:e.jsx(l,{icon:e.jsx("div",{className:"i-tabler:trash"}),variant:"outline"})})]})]})},actionRender:()=>e.jsx(e.Fragment,{children:e.jsx(n,{title:t("tools.file.fields.upload"),trigger:e.jsx(l,{icon:e.jsx("div",{className:"i-tabler:plus t-icon"}),children:t("tools.file.fields.upload")}),component:()=>a(()=>import("./upload-4465b6a2.js"),["assets/upload-4465b6a2.js","assets/modulepreload-polyfill-ac2ad948.js","assets/uploadFile-3289d450.js","assets/useUpload-1230eea6.js","assets/index-b453100f.js"]),componentProps:{id:b}})})})})};export{O as default};
