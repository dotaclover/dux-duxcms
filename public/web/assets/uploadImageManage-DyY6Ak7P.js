import{au as h,X as v,g as N,j as e,O as C,a8 as u,aN as b,aG as k,ac as I}from"./modulepreload-polyfill-DkiKXnSB.js";import{F as w}from"./manage-Bom0epIq.js";const E=({className:r,value:n,defaultValue:c,onChange:_,multiple:t,accept:g})=>{var x;const[i,o]=h({value:n,defaultValue:c,onChange:_}),p=v(),[f,d]=N.useState(!1),a=i?Array.isArray(i)?i:[i]:void 0;return e.jsxs("div",{className:C(["flex flex-col gap-2 w-full t-upload",r]),children:[e.jsxs("div",{className:"t-upload__card clearfix ",children:[a&&(a==null?void 0:a.length)>0&&((x=a.map)==null?void 0:x.call(a,(m,l)=>e.jsx(y,{url:m,onRemove:()=>{o(s=>{if(t)return s==null?void 0:s.filter((z,j)=>j!=l)})}},l))),(t||!a||(a==null?void 0:a.length)<=0)&&e.jsx("div",{className:"t-upload__card-item t-is-background",children:e.jsxs("div",{className:"t-upload__image-add t-upload__card-container t-upload__card-box",onClick:()=>d(!0),children:[e.jsx(u,{name:"add"}),e.jsx("p",{className:"t-size-s",children:p("placeholder.image",{ns:"file"})})]})})]}),e.jsx(b,{className:"app-modal",width:"800px",header:p("fields.manage",{ns:"file"}),visible:f,destroyOnClose:!0,footer:!1,onClose:()=>d(!1),children:e.jsx(w,{accept:g,mode:t?"multi":"single",onClose:()=>d(!1),onChange:m=>{const l=m.map(s=>s.url);o(t?s=>[...s,...l]:l[0])}})})]})},y=({url:r,onRemove:n})=>e.jsx("div",{className:"t-upload__card-item",children:e.jsx("div",{className:"t-upload__card-content t-is-bordered",children:e.jsx(k,{trigger:({open:c})=>e.jsx(I,{src:r,className:"t-upload__card-image w-full h-full",overlayContent:e.jsxs("div",{className:"t-upload__card-mask",children:[e.jsx("span",{className:"t-upload__card-mask-item",children:e.jsx(u,{size:"16px",name:"browse",onClick:()=>c()})}),e.jsx("span",{className:"t-upload__card-mask-item-divider"}),e.jsx("span",{className:"t-upload__card-mask-item t-upload__delete",onClick:n,children:e.jsx(u,{size:"16px",name:"delete"})})]}),overlayTrigger:"hover",fit:"contain"}),images:[r]})})});export{E as U};
