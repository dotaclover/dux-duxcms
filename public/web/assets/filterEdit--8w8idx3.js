import{X as V,g as c,as as E,at as I,P as p,j as e,S as N}from"./modulepreload-polyfill-DkiKXnSB.js";import{B as g,c as S}from"./button-D0ULnvDG.js";const L=({form:t,field:a,title:F,resource:i,component:r,optionLabel:v,optionValue:b,defaultSelect:u})=>{const d=V(),[x,h]=c.useState(!1),{options:s,onSearch:m,queryResult:C}=E({resource:i,optionLabel:v||"name",optionValue:b||"id"}),l=c.useContext(I);c.useEffect(()=>{var n,j;!u||!s.length||!l||x||(h(()=>!0),t==null||t.setFieldsValue({[a]:(n=s[0])==null?void 0:n.value}),l.setFilters({[a]:(j=s[0])==null?void 0:j.value}),console.log(t==null?void 0:t.getFieldValue(a)))},[u,a,t,x,s,l]);const o=p.useWatch(a,t);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(g,{resource:i,action:"create",variant:"outline",theme:"default",title:d("buttons.create"),icon:e.jsx("div",{className:"i-tabler:plus"}),component:r,children:e.jsx(e.Fragment,{})})}),e.jsx(p.FormItem,{name:a,children:e.jsx(N,{clearable:!0,onSearch:m,options:s,placeholder:F,loading:C.isLoading})}),o&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{resource:i,action:"edit",variant:"outline",theme:"default",title:d("tools.magic.fields.editGroup"),icon:e.jsx("div",{className:"i-tabler:edit"}),component:r,rowId:o,children:e.jsx(e.Fragment,{})}),e.jsx(S,{resource:i,variant:"outline",theme:"default",icon:e.jsx("div",{className:"i-tabler:trash"}),rowId:o,onConfirm:()=>{setTimeout(()=>{var n;t.getFieldValue(a)&&(t==null||t.setFieldsValue({[a]:(n=s[0])==null?void 0:n.value}))},0),h(!1)},children:e.jsx(e.Fragment,{})})]})]})};export{L as F};
