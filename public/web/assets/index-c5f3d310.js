import{g as p,j as s,a1 as O,a2 as F,a3 as R,U as b,a4 as _,a5 as $,a6 as z,a7 as x,L as j,M as u,a8 as G,Z as U}from"./modulepreload-polyfill-ac2ad948.js";const L=({single:e,options:a,min:c})=>{const l=O(n=>n.dark),d=p.useMemo(()=>{const n=a||[];let i={grid:{top:30,right:30,left:30,bottom:30}};return c&&(i={grid:{top:5,right:5,bottom:5,left:5,show:!1},xAxis:{show:!1},yAxis:{show:!1}}),F.all([i,...n])},[c,a]);return s.jsx(R,{option:d,theme:l?e?"dark-single":"dark":e?"light-single":"light",style:{height:"100%",width:"100%"},opts:{renderer:"svg"}})},S=({labels:e,data:a,legend:c,min:l,options:d})=>{const n=p.useMemo(()=>{const i={xAxis:{type:"category",data:e},yAxis:{type:"value"},series:a==null?void 0:a.map(o=>({name:o.name,data:o.data,type:"bar",barMaxWidth:40})),tooltip:{trigger:"axis"}};return c&&(i.legend={show:!0}),i},[a,e,c]);return s.jsx(L,{options:[n,d||{}],min:l})},B=({labels:e,data:a,min:c,legend:l,options:d})=>{const n=p.useMemo(()=>{const i={xAxis:{type:"category",data:e,boundaryGap:!1},yAxis:{type:"value"},series:a==null?void 0:a.map(o=>({name:o.name,data:o.data,type:"line"})),tooltip:{trigger:"axis"}};return l&&(i.legend={show:!0}),i},[a,e,l]);return s.jsx(L,{options:[n,d||{}],min:c})},W="/web/assets/ie-c8c515db.svg",Z="/web/assets/edge-ab71d1cf.svg",q="/web/assets/chrome-87dae1d7.svg",H="/web/assets/firefox-c851db61.svg",J="/web/assets/opera-9e865a0c.svg",K="/web/assets/safari-85af91c1.svg",P="/web/assets/other-b0798aff.svg",Y=()=>{var v,w,N,y,C,I,k,E,A,M;const e=b(),{data:a}=_({method:"get",url:"cms/stats/index"}),{data:c}=$({resource:"content.article",meta:{params:{pageSize:5}}}),l=(v=a==null?void 0:a.data)==null?void 0:v.nums,d=(w=a==null?void 0:a.data)==null?void 0:w.views,n=(N=a==null?void 0:a.data)==null?void 0:N.push,i=(y=a==null?void 0:a.data)==null?void 0:y.class,o=(C=a==null?void 0:a.data)==null?void 0:C.spider,t=(I=a==null?void 0:a.data)==null?void 0:I.browsers,h=(k=a==null?void 0:a.data)==null?void 0:k.ips;return s.jsxs(z,{title:e("cms.dashboard.name"),icon:"i-tabler:home",children:[s.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row",children:[s.jsxs("div",{className:"grid grid-cols-2 flex-none gap-4",children:[s.jsx(m,{color:"brand",title:e("cms.dashboard.nums.article"),num:l==null?void 0:l.article,icon:"i-tabler:article"}),s.jsx(m,{color:"success",title:e("cms.dashboard.nums.pv"),num:l==null?void 0:l.pv,icon:"i-tabler:eye"}),s.jsx(m,{color:"error",title:e("cms.dashboard.nums.uv"),num:l==null?void 0:l.uv,icon:"i-tabler:user"}),s.jsx(m,{color:"warning",title:e("cms.dashboard.nums.spider"),num:l==null?void 0:l.spider,icon:"i-tabler:spider"})]}),s.jsxs("div",{className:"grid-colos-1 grid gap-4 lg:grid-cols-2 lg:w-0 lg:flex-1",children:[s.jsx(x,{title:e("cms.dashboard.views.name"),children:s.jsx("div",{className:"h-61 w-full",children:s.jsx(B,{labels:d==null?void 0:d.labels,data:[{name:e("cms.dashboard.views.pv"),data:(d==null?void 0:d.pvs)||[]},{name:e("cms.dashboard.views.uv"),data:(d==null?void 0:d.uvs)||[]}],legend:!0})})}),s.jsx(x,{title:e("cms.dashboard.spider"),children:s.jsx("div",{className:"h-61 w-full",children:s.jsx(B,{labels:o==null?void 0:o.labels,data:o==null?void 0:o.data,legend:!0})})})]})]}),s.jsxs("div",{className:"mt-4 flex flex-col gap-4 gap-4 lg:flex-row",children:[s.jsxs("div",{className:"lg:w-84",children:[s.jsx(x,{title:e("cms.dashboard.source"),headerBordered:!0,children:s.jsx("div",{className:"w-full flex flex-col gap-4",children:s.jsx(j,{theme:"paragraph",loading:!t,children:t&&t.length>0&&((E=t==null?void 0:t.map)==null?void 0:E.call(t,(r,g)=>s.jsx(T,{name:r==null?void 0:r.browser,num:r==null?void 0:r.num},g)))||s.jsx(f,{})})})}),s.jsx(x,{title:e("cms.dashboard.area"),className:"mt-4",headerBordered:!0,children:s.jsx("div",{className:"w-full flex flex-col gap-4",children:s.jsx(j,{theme:"paragraph",loading:!h,children:h&&h.length>0&&h.length>0&&(h==null?void 0:h.map((r,g)=>s.jsx(Q,{city:(r==null?void 0:r.city)||e("cms.dashboard.unknown"),num:r==null?void 0:r.num},g)))||s.jsx(f,{})})})})]}),s.jsxs("div",{className:"flex-grow",children:[s.jsx(x,{title:e("cms.dashboard.article.name"),headerBordered:!0,className:"mb-4",children:s.jsx("div",{className:"flex flex-col -my-3 divide-y divide-gray-3 dark:divide-gray-9",children:s.jsx(j,{theme:"paragraph",loading:!(c!=null&&c.data),className:"my-3",children:(c==null?void 0:c.data)&&((A=c==null?void 0:c.data)==null?void 0:A.length)>0&&((M=c==null?void 0:c.data)==null?void 0:M.map((r,g)=>s.jsx(V,{title:r==null?void 0:r.title,id:r==null?void 0:r.id,time:r==null?void 0:r.created_at,view:r==null?void 0:r.view},g)))||s.jsx(f,{})})})}),s.jsxs("div",{className:"grid-colos-1 grid gap-4 lg:grid-cols-2",children:[s.jsx(x,{title:e("cms.dashboard.push.name"),children:s.jsx("div",{className:"h-56 w-full",children:s.jsx(S,{labels:n==null?void 0:n.labels,data:[{name:e("cms.dashboard.push.num"),data:n==null?void 0:n.nums}]})})}),s.jsx(x,{title:e("cms.dashboard.class.name"),children:s.jsx("div",{className:"h-56 w-full",children:s.jsx(S,{labels:i==null?void 0:i.labels,data:[{name:e("cms.dashboard.class.num"),data:i==null?void 0:i.nums}]})})})]})]})]})]})},f=()=>{const e=b();return s.jsx("div",{className:"h-40 flex items-center justify-center text-secondary",children:e("cms.dashboard.noData")})},Q=({city:e,num:a})=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:e}),s.jsx("div",{children:a||0})]}),T=({name:e,num:a})=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:u(["block h-4 w-4"]),children:[e==="Ie"&&s.jsx("img",{src:W}),e==="Chrome"&&s.jsx("img",{src:q}),e==="Edge"&&s.jsx("img",{src:Z}),e==="Firefox"&&s.jsx("img",{src:H}),e==="Opera"&&s.jsx("img",{src:J}),e==="Safari"&&s.jsx("img",{src:K}),e!="Ie"&&e!="Chrome"&&e!="Edge"&&e!="Firefox"&&e!="Opera"&&e!="Safari"&&s.jsx("img",{src:P})]}),e]}),s.jsx("div",{children:a||0})]}),V=({id:e,title:a,time:c,view:l})=>{const d=b(),n=G();return s.jsxs("div",{className:"flex flex-col gap-1 py-4",children:[s.jsx("div",{children:s.jsx(U,{className:"font-bold",onClick:()=>{n({to:`/admin/content/article/page/${e}`})},children:a})}),s.jsxs("div",{className:"flex gap-2 text-xs text-secondary",children:[s.jsxs("div",{children:[d("cms.dashboard.article.pv")," ",l]}),s.jsxs("div",{children:[d("cms.dashboard.article.date")," ",c]})]})]})},m=({title:e,num:a,icon:c,color:l="brand"})=>{const d={warning:["bg-warning-1","text-warning"],brand:["bg-brand-1","text-brand"],success:["bg-success-1","text-success"],error:["bg-error-1","text-error"]};return s.jsxs(x,{className:"min-w-40",children:[s.jsx("div",{className:"mt-4 flex flex-col items-center",children:s.jsx("div",{className:u(["flex items-center justify-center rounded p-2",...d[l]]),children:s.jsx("div",{className:u(["text-2xl",c])})})}),s.jsxs("div",{className:"mt-4 flex flex-col items-center",children:[s.jsx("div",{className:"text-xs text-gray-400",children:e||s.jsx(j,{children:" "})}),s.jsx("div",{className:"mt-1 text-xl",children:a||0})]})]})};export{Y as default};
