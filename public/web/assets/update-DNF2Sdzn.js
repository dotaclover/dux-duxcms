import{j as s}from"./vendor-map-DjDVTs0N.js";import{r as t}from"./vendor-react-BlTfyhut.js";import{G as f}from"./vendor-refine-BK41FXO6.js";import{u as g,a1 as v,v as b}from"./modulepreload-polyfill-D6ThnDFs.js";import"./vendor-echarts-JHGMnnew.js";import{M as N,d as n,a0 as M,B as d,c as Y}from"./vendor-tdesign-BxQoi5Mo.js";import"./vendor-tinymce-lUkVC9Da.js";import"./vendor-lib-CKVa3D7Q.js";import"./vendor-markdown-CL7ixDl-.js";const y=({data:l})=>{const e=f(),[o,p]=t.useState(!1),m=g(),[u,i]=t.useState(!1),[r,x]=t.useState(""),{onClose:h}=v(),j=t.useCallback(()=>{i(!0),m.request("cloud/apps/update","post",{data:{name:l.name,build:o}}).then(a=>{var c;if(a.code!==200){N.error(a.message);return}x((c=a==null?void 0:a.data)==null?void 0:c.content)}).finally(()=>{i(!1)})},[]);return s.jsxs(s.Fragment,{children:[r?s.jsx("div",{className:"p-4",children:s.jsx("pre",{className:"overflow-auto rounded-lg p-4 bg-component",children:r})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"mb-2",children:e("cloud.apps.tips.update")}),s.jsxs("div",{className:"mb-2",children:[e("cloud.apps.fields.verCur"),n(l.local_time*1e3).format("YYYY-MM-DD HH:mm:ss")]}),s.jsxs("div",{children:[e("cloud.apps.fields.target"),s.jsx("span",{className:"text-error",children:n(l.time*1e3).format("YYYY-MM-DD HH:mm:ss")})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"mb-2",children:e("cloud.apps.validator.build")}),s.jsx(M,{value:o,onChange:a=>p(a)}),s.jsx("div",{className:"mt-2 text-placeholder",children:e("cloud.apps.help.build")})]}),s.jsxs(b.Footer,{children:[s.jsx(d,{variant:"outline",onClick:h,children:e("cloud.apps.action.close")}),s.jsx(d,{onClick:()=>{j()},children:e("cloud.apps.action.update")})]})]}),s.jsx(Y,{loading:u,fullscreen:!0,preventScrollThrough:!0,text:e("cloud.apps.tips.loading")})]})};export{y as default};
